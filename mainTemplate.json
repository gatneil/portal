{
    "$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json",
    "contentVersion":"1.0.0.0",
    "parameters":{
	"location": {
	    "type": "string",
	    "metadata": {
		"description": "location of resources"
	    }
	},
	"baseUrl": {
	    "type": "string",
	    "metadata": {
		"artifactsBaseUrl": "Base URL of the VMSS Template gallery package"
	    },
	    "defaultValue": "https://raw.githubusercontent.com/gatneil/portal/clean"
	},
	"vmssName":{
	    "type":"string",
	    "metadata":{
		"description":"String used as a base for naming resources. Must be 3-61 characters in length."
	    },
	    "maxLength": 61
	}
    },
    "variables":{
	"baseTemplateUri":"[concat(parameters('baseUrl'), '/')]",
	"vnetName": "[concat(parameters('vmssName'), 'Vnet')]"
    },
    
    "resources":
    [
	{
	    "name":"vnetDep",
	    "type":"Microsoft.Resources/deployments",
	    "apiVersion":"2015-11-01",
	    "properties":{
		"mode":"Incremental",
		"templateLink":{
		    "uri":"[concat(variables('baseTemplateUri'), 'vnet.json')]",
		    "contentVersion":"1.0.0.0"
		},
		"parameters": {
		    "location": {"value": "[parameters('location')]"},
		    "vnetName": {"value": "[variables('vnetName')]"}
		}
	    }
	}
    ]
}
